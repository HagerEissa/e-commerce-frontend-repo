<div class="form-container">
  @if(id){
    <h1 class="title">edit Product</h1>
  }@else {
    <h1 class="title">Add New Product</h1>
  }


  <form class="form shadow p-4" [formGroup]="productForm" >

    <mat-form-field>
      <mat-label>category</mat-label>
      <mat-select formControlName="categoryId" multiple>
        @for (item of categories; track $index) {
      <mat-option [value]="item._id">{{item.name}}</mat-option>
    }
      </mat-select>
    </mat-form-field>
    <mat-form-field>
      <mat-label>brand</mat-label>
      <mat-select formControlName="brandId" multiple>

        @for (item of brands; track $index) {
          <mat-option [value]="item._id">{{item.name}}</mat-option>
        }

      </mat-select>
    </mat-form-field>


    <div class="form-field">
      <label for="name">Name</label>
      <input type="text" id="name" name="name" placeholder="Enter product name" formControlName="name"/>
    </div>

    <div class="form-field">
      <label for="shortDesc">Short Description</label>
      <input type="text" id="shortDesc" name="shortDesc" placeholder="Enter short description"formControlName="shortDesc" />
    </div>

    <div class="form-field">
      <label for="desc">Description</label>
      <textarea id="desc" name="desc" rows="5" placeholder="Enter detailed description" formControlName="desc"></textarea>
    </div>

    <div class="form-field">
      <label for="price">price</label>
      <input type="number" id="price" name="price" placeholder="Enter price" formControlName="price"/>
    </div>

    <div class="form-field">
      <label for="discount">discount</label>
      <input type="number" id="discount" name="discount" placeholder="Enter discount" formControlName="discount"/>
    </div>

    <div>
      <mat-checkbox class="example-margin"formControlName="isTrend">is trend</mat-checkbox>
      <mat-checkbox class="example-margin"formControlName="isnew">is New</mat-checkbox>
    </div>

    <!-- <div class="form-field" formArrayName="imgURL">
      <h4>images</h4>
      <label for="image1">image1</label>
      <input type="text" id="image1" name="imgURL" placeholder="Enter image" *ngFor="let img of images.controls;let i = index" [formControlName]="i"/>
      <button type="button" (click)="addNewImage()">Add Image</button>
      <button type="button" (click)="removeImage()">remove Image</button>
    </div> -->

    <div class="form-field" formArrayName="imgURL">
      <h4>Images</h4>
      <label for="image1">Image 1</label>
      <input type="file" id="image1" name="imgURL" (change)="onImageChange($event, 0)" *ngFor="let img of images.controls; let i = index" [formControlName]="i"/>
      <!-- <button type="button" (click)="addNewImage()">Add Image</button>
      <button type="button" (click)="removeImage()">Remove Image</button> -->
    </div>
    <!-- Add more fields as needed for price, discount, etc. -->
    <div class="form-field">
      @if(id){
        <button type="submit" class="submit-btn" [disabled]="productForm.invalid" (click)="updateProduct()">update Product</button>
      }@else {
        <button type="submit" class="submit-btn" [disabled]="productForm.invalid" (click)="addProduct()">Add Product</button>
      }
    </div>
  </form>
</div>
